import{a as ee,b as te}from"./chunk-EMY7YEHD.js";import{a as H,b as R,c as J,f as K}from"./chunk-5EQPP3UM.js";import{b as Z,c as $}from"./chunk-GKRR3LY4.js";import{a as Y}from"./chunk-6Y7QP5KE.js";import{c as Q,d as W,i as X}from"./chunk-M5CW5NFQ.js";import{a as j,b as z}from"./chunk-LTI5L47W.js";import{b as P,c as S,e as d,g as k,h as N,m as w,p as A,q as G,u as V,v as L,x as q}from"./chunk-C2MAVCXR.js";import{Y as B,Z as U}from"./chunk-3B4OGLPL.js";import{Ac as O,Ga as o,Ic as D,Ka as I,Mb as n,Nb as y,Ob as p,Ra as T,Va as c,Xa as x,kb as m,lb as i,mb as t,nb as g,wb as E,yb as u}from"./chunk-FEQCTJNV.js";function ne(e,a){e&1&&(i(0,"mat-error"),n(1," El nombre es requerido "),t())}function oe(e,a){e&1&&(i(0,"mat-error"),n(1," El nombre debe tener al menos 3 caracteres "),t())}function re(e,a){e&1&&(i(0,"mat-error"),n(1," El nombre no puede superar los 100 caracteres "),t())}function ae(e,a){e&1&&(i(0,"mat-error"),n(1," La descripci\xF3n es requerida "),t())}function me(e,a){e&1&&(i(0,"mat-error"),n(1," La descripci\xF3n debe tener al menos 3 caracteres "),t())}function le(e,a){e&1&&(i(0,"mat-error"),n(1," La descripci\xF3n no puede superar los 500 caracteres "),t())}function pe(e,a){if(e&1&&(i(0,"div",23)(1,"strong"),n(2,"Usuario:"),t(),n(3),t()),e&2){let l=u(2);o(3),p(" ",l.initialData.AudUsuario," ")}}function de(e,a){if(e&1&&(i(0,"div",22)(1,"div",23)(2,"strong"),n(3,"ID:"),t(),n(4),t(),c(5,pe,4,1,"div",24),t()),e&2){let l=u();o(4),p(" ",l.initialData.IdTipoExpediente," "),o(),m("ngIf",l.initialData.AudUsuario)}}function ce(e,a){e&1&&g(0,"mat-spinner",25)}function se(e,a){if(e&1&&(i(0,"mat-icon"),n(1),t()),e&2){let l=u();o(),y(l.isEdit?"save":"add")}}function ue(e,a){if(e&1&&(i(0,"div",26)(1,"mat-icon"),n(2,"error"),t(),n(3),t()),e&2){let l=u();o(3),p(" ",l.error," ")}}var ie=class e{constructor(a){this.fb=a;this.tipoExpedienteForm=this.createForm()}isEdit=!1;initialData=null;loading=!1;error=null;submitForm=new x;cancelForm=new x;tipoExpedienteForm;ngOnInit(){this.isEdit&&this.initialData&&this.loadInitialData()}createForm(){return this.fb.group({Nombre:["",[d.required,d.minLength(3),d.maxLength(100)]],Descripcion:["",[d.required,d.minLength(3),d.maxLength(500)]],Activo:[!0,d.required]})}loadInitialData(){this.initialData&&this.tipoExpedienteForm.patchValue({Nombre:this.initialData.Nombre,Descripcion:this.initialData.Descripcion,Activo:this.initialData.Activo})}onSubmit(){if(this.tipoExpedienteForm.valid&&!this.loading){let a={Nombre:this.tipoExpedienteForm.get("Nombre")?.value?.trim(),Descripcion:this.tipoExpedienteForm.get("Descripcion")?.value?.trim(),Activo:this.tipoExpedienteForm.get("Activo")?.value};this.submitForm.emit(a)}else Object.keys(this.tipoExpedienteForm.controls).forEach(a=>{this.tipoExpedienteForm.get(a)?.markAsTouched()})}onCancel(){this.cancelForm.emit()}resetForm(){this.tipoExpedienteForm.reset(),this.tipoExpedienteForm.patchValue({Activo:!0}),Object.keys(this.tipoExpedienteForm.controls).forEach(a=>{this.tipoExpedienteForm.get(a)?.setErrors(null)})}getFormData(){return this.tipoExpedienteForm.valid?{Nombre:this.tipoExpedienteForm.get("Nombre")?.value?.trim(),Descripcion:this.tipoExpedienteForm.get("Descripcion")?.value?.trim(),Activo:this.tipoExpedienteForm.get("Activo")?.value}:null}setError(a){this.error=a}clearError(){this.error=null}get nombreControl(){return this.tipoExpedienteForm.get("Nombre")}get descripcionControl(){return this.tipoExpedienteForm.get("Descripcion")}get activoControl(){return this.tipoExpedienteForm.get("Activo")}get isFormValid(){return this.tipoExpedienteForm.valid}get isFormDirty(){return this.tipoExpedienteForm.dirty}static \u0275fac=function(l){return new(l||e)(I(L))};static \u0275cmp=T({type:e,selectors:[["app-tipo-expediente-form"]],inputs:{isEdit:"isEdit",initialData:"initialData",loading:"loading",error:"error"},outputs:{submitForm:"submitForm",cancelForm:"cancelForm"},decls:47,vars:17,consts:[[1,"form-container"],[1,"form-header"],[1,"form-title"],["mat-raised-button","","color","primary","type","button",1,"back-button",3,"click"],[1,"tipo-expediente-form",3,"ngSubmit","formGroup"],[1,"form-field"],[1,"field-label"],["appearance","outline",1,"full-width"],["matInput","","formControlName","Nombre","maxlength","100"],["align","start"],[4,"ngIf"],["matInput","","formControlName","Descripcion","rows","4","maxlength","500"],[1,"activo-field"],[1,"custom-toggle"],["type","checkbox","formControlName","Activo",1,"toggle-input"],[1,"toggle-slider"],[1,"toggle-text"],["class","audit-info",4,"ngIf"],[1,"form-actions"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["diameter","20",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"audit-info"],[1,"audit-field"],["class","audit-field",4,"ngIf"],["diameter","20"],[1,"error-message"]],template:function(l,r){if(l&1&&(i(0,"div",0)(1,"mat-card")(2,"div",1)(3,"mat-card-title",2),n(4),t(),i(5,"button",3),E("click",function(){return r.onCancel()}),i(6,"mat-icon"),n(7,"arrow_back"),t(),n(8," Volver "),t()(),i(9,"mat-card-content")(10,"form",4),E("ngSubmit",function(){return r.onSubmit()}),i(11,"div",5)(12,"label",6),n(13,"Nombre del Tipo de Expediente"),t(),i(14,"mat-form-field",7),g(15,"input",8),i(16,"mat-hint",9)(17,"strong"),n(18),t()(),c(19,ne,2,0,"mat-error",10)(20,oe,2,0,"mat-error",10)(21,re,2,0,"mat-error",10),t()(),i(22,"div",5)(23,"label",6),n(24,"Descripci\xF3n"),t(),i(25,"mat-form-field",7)(26,"textarea",11),n(27,"                "),t(),i(28,"mat-hint",9)(29,"strong"),n(30),t()(),c(31,ae,2,0,"mat-error",10)(32,me,2,0,"mat-error",10)(33,le,2,0,"mat-error",10),t()(),i(34,"div",12)(35,"label",13),g(36,"input",14)(37,"span",15),i(38,"span",16),n(39),t()()(),c(40,de,6,2,"div",17),i(41,"div",18)(42,"button",19),c(43,ce,1,0,"mat-spinner",20)(44,se,2,1,"mat-icon",10),n(45),t()(),c(46,ue,4,1,"div",21),t()()()()),l&2){let s,_,b,v,f,h,F,C,M;o(4),p(" ",r.isEdit?"Editar Tipo de Expediente":"Nuevo Tipo de Expediente"," "),o(6),m("formGroup",r.tipoExpedienteForm),o(8),p("",((s=r.tipoExpedienteForm.get("Nombre"))==null||s.value==null?null:s.value.length)||0,"/100"),o(),m("ngIf",(_=r.tipoExpedienteForm.get("Nombre"))==null?null:_.hasError("required")),o(),m("ngIf",(b=r.tipoExpedienteForm.get("Nombre"))==null?null:b.hasError("minlength")),o(),m("ngIf",(v=r.tipoExpedienteForm.get("Nombre"))==null?null:v.hasError("maxlength")),o(9),p("",((f=r.tipoExpedienteForm.get("Descripcion"))==null||f.value==null?null:f.value.length)||0,"/500"),o(),m("ngIf",(h=r.tipoExpedienteForm.get("Descripcion"))==null?null:h.hasError("required")),o(),m("ngIf",(F=r.tipoExpedienteForm.get("Descripcion"))==null?null:F.hasError("minlength")),o(),m("ngIf",(C=r.tipoExpedienteForm.get("Descripcion"))==null?null:C.hasError("maxlength")),o(6),p(" ",(M=r.tipoExpedienteForm.get("Activo"))!=null&&M.value?"Activo":"Inactivo"," "),o(),m("ngIf",r.isEdit&&r.initialData),o(2),m("disabled",r.tipoExpedienteForm.invalid||r.loading),o(),m("ngIf",r.loading),o(),m("ngIf",!r.loading),o(),p(" ",r.loading?"Guardando...":r.isEdit?"Guardar cambios":"Guardar"," "),o(),m("ngIf",r.error)}},dependencies:[D,O,q,w,S,P,k,N,V,A,G,Y,X,W,Q,$,Z,U,B,z,j,K,H,J,R,te,ee],styles:['@charset "UTF-8";.form-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:600px;margin:0 auto}.tipo-expediente-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;margin-top:1rem}.full-width[_ngcontent-%COMP%]{width:100%}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.field-label[_ngcontent-%COMP%]{font-weight:500;color:#333;font-size:.95rem;margin-bottom:.25rem}.activo-field[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1.2rem;background:#f8f9fa;border-radius:8px;border:2px solid #e9ecef;transition:border-color .3s ease}.activo-field[_ngcontent-%COMP%]:hover{border-color:#416759}.custom-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;cursor:pointer;font-size:1rem;font-weight:500}.toggle-input[_ngcontent-%COMP%]{display:none}.toggle-slider[_ngcontent-%COMP%]{position:relative;width:50px;height:22px;background-color:#ddd;border:2px solid #333;border-radius:12px;transition:all .3s ease}.toggle-slider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:1px;left:1px;width:16px;height:16px;background-color:#fff;border:2px solid #333;border-radius:50%;transition:all .3s ease;box-shadow:0 2px 4px #0003}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-slider[_ngcontent-%COMP%]{background-color:#4caf50;border:2px solid #333}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-slider[_ngcontent-%COMP%]:before{transform:translate(26px);background-color:#fff;border:2px solid #333}.toggle-text[_ngcontent-%COMP%]{color:#333;-webkit-user-select:none;user-select:none}.audit-info[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px;padding:1rem;margin-top:1rem}.audit-field[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#666;font-size:.9rem}.audit-field[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:2rem;padding-top:1rem;border-top:1px solid #e0e0e0}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#f44336;background:#ffebee;padding:1rem;border-radius:4px;border-left:4px solid #f44336;margin-top:1rem}mat-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#f8f9fa;padding:1.5rem;margin:-1.5rem -1.5rem 1.5rem;border-bottom:1px solid #e0e0e0}.form-title[_ngcontent-%COMP%]{color:#416759;font-size:1.25rem;font-weight:600;margin:0}.back-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#416759;color:#fff;padding:8px 16px;border-radius:6px;font-size:.95rem}.back-button[_ngcontent-%COMP%]:hover{background:#355a4c}mat-card-content[_ngcontent-%COMP%]{padding:1.5rem}button[color=primary][_ngcontent-%COMP%]{background:#416759;color:#fff}button[color=primary][_ngcontent-%COMP%]:hover:not([disabled]){background:#355a4c}button[color=primary][_ngcontent-%COMP%]:disabled{background:#ccc}mat-form-field[_ngcontent-%COMP%]{margin-bottom:.5rem}.mat-mdc-form-field-hint-wrapper[_ngcontent-%COMP%]{padding:0}.form-actions[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:.5rem}']})};export{ie as a};
