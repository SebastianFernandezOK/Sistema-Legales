import{a as P,e as D}from"./chunk-2OGJROED.js";import"./chunk-U5TTPYBI.js";import"./chunk-H62BNP7K.js";import"./chunk-CUCTTRDO.js";import"./chunk-UIXLCLYE.js";import"./chunk-5EQPP3UM.js";import"./chunk-MS4AQ6UA.js";import"./chunk-GKRR3LY4.js";import"./chunk-BOKKIAFZ.js";import"./chunk-6Y7QP5KE.js";import"./chunk-M5CW5NFQ.js";import"./chunk-6J5RYYQJ.js";import"./chunk-KCUSWNL7.js";import"./chunk-G6RQVBEQ.js";import{i as w,k as t}from"./chunk-C2MAVCXR.js";import"./chunk-7U2T7U2W.js";import"./chunk-3B4OGLPL.js";import{a as I,c as h}from"./chunk-OL3NKZYM.js";import{Ac as _,Ga as a,Ic as C,Ka as p,Mb as m,Nb as v,Ra as x,Va as u,ga as l,ha as f,kb as r,lb as d,mb as c,ub as g,wb as E,yb as s}from"./chunk-FEQCTJNV.js";import"./chunk-TSRGIXR5.js";function S(i,n){if(i&1){let e=g();d(0,"app-expediente-form",3),E("create",function(b){l(e);let M=s();return f(M.onUpdate(b))}),c()}if(i&2){let e=s();r("form",e.form)("modo","editar")}}function F(i,n){i&1&&(d(0,"div",4),m(1,"Cargando expediente..."),c())}function O(i,n){if(i&1&&(d(0,"div",5),m(1),c()),i&2){let e=s();a(),v(e.error)}}var y=class i{constructor(n,e,o){this.route=n;this.router=e;this.expedienteService=o}expediente=null;form;loading=!1;error=null;ngOnInit(){let n=this.route.snapshot.paramMap.get("id");this.form=new w({CodigoExpediente:new t(""),PrimerDueno:new t(""),Ano:new t(""),FechaInicio:new t(""),FechaFin:new t(""),Estado:new t(""),Dependencia:new t(""),Caratula:new t(""),Descripcion:new t(""),Observaciones:new t(""),IdPropiedadMinera:new t(null),IdTipoExpediente:new t(null)}),n&&(this.loading=!0,this.expedienteService.getExpedienteById(+n).subscribe({next:e=>{this.expediente=e,e&&this.form.patchValue({CodigoExpediente:e.CodigoExpediente??"",PrimerDueno:e.PrimerDueno??"",Ano:e.Ano??"",Estado:e.Estado??"",Dependencia:e.Dependencia??"",Caratula:e.Caratula??"",Descripcion:e.Descripcion??"",Observaciones:e.Observaciones??"",IdPropiedadMinera:e.IdPropiedadMinera??null,IdTipoExpediente:e.IdTipoExpediente??null}),this.loading=!1},error:()=>{this.error="No se pudo cargar el expediente.",this.loading=!1}}))}onUpdate(n){this.expediente&&this.expedienteService.updateExpediente(this.expediente.IdExpediente,n).subscribe({next:()=>{this.router.navigate(["/expedientes",this.expediente.IdExpediente])},error:()=>{this.error="Error al actualizar el expediente."}})}static \u0275fac=function(e){return new(e||i)(p(I),p(h),p(P))};static \u0275cmp=x({type:i,selectors:[["app-expediente-edit-page"]],decls:3,vars:3,consts:[[3,"form","modo","create",4,"ngIf"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[3,"create","form","modo"],[1,"loading"],[1,"error"]],template:function(e,o){e&1&&u(0,S,1,2,"app-expediente-form",0)(1,F,2,0,"div",1)(2,O,2,1,"div",2),e&2&&(r("ngIf",o.expediente),a(),r("ngIf",o.loading),a(),r("ngIf",o.error))},dependencies:[C,_,D],styles:[".loading[_ngcontent-%COMP%]{text-align:center;margin-top:2rem;color:#888}.error[_ngcontent-%COMP%]{color:#c00;text-align:center;margin-top:2rem}"]})};export{y as ExpedienteEditPageComponent};
