import{a as le}from"./chunk-PVK2YKAR.js";import{c as ie,d as oe,e as ne,f as ae,g as me}from"./chunk-CUCTTRDO.js";import"./chunk-MS4AQ6UA.js";import{b as te,c as re}from"./chunk-GKRR3LY4.js";import{d as X,h as Z,i as ee}from"./chunk-BOKKIAFZ.js";import{a as Y}from"./chunk-6Y7QP5KE.js";import{b as H,c as $,d as K,f as Q,i as W}from"./chunk-M5CW5NFQ.js";import"./chunk-6J5RYYQJ.js";import"./chunk-KCUSWNL7.js";import"./chunk-G6RQVBEQ.js";import{c as A,e as p,g as k,h as R,m as V,p as z,q as G,t as L,v as j,x as B}from"./chunk-C2MAVCXR.js";import"./chunk-7U2T7U2W.js";import{Y as U,Z as J}from"./chunk-3B4OGLPL.js";import{a as N,c as O}from"./chunk-OL3NKZYM.js";import{Ac as y,Ga as a,Ib as q,Ic as w,Ka as f,Mb as r,Ob as P,Ra as F,Va as u,ga as _,ha as E,kb as m,lb as t,mb as e,nb as c,ub as D,wb as x,yb as g}from"./chunk-FEQCTJNV.js";import"./chunk-TSRGIXR5.js";function ue(o,n){o&1&&(t(0,"mat-error"),r(1," El tipo de persona es requerido "),e())}function ce(o,n){o&1&&(t(0,"mat-error"),r(1," El nombre es requerido "),e())}function pe(o,n){o&1&&(t(0,"mat-error"),r(1," El DNI/CUIT es requerido "),e())}function se(o,n){o&1&&(t(0,"mat-error"),r(1," El representante legal es requerido "),e())}function fe(o,n){o&1&&(t(0,"mat-error"),r(1," El email es requerido "),e())}function ge(o,n){o&1&&(t(0,"mat-error"),r(1," Ingrese un email v\xE1lido "),e())}function _e(o,n){o&1&&(t(0,"mat-error"),r(1," El tel\xE9fono es requerido "),e())}function Ee(o,n){o&1&&(t(0,"mat-error"),r(1," El domicilio es requerido "),e())}function xe(o,n){o&1&&(t(0,"mat-error"),r(1," La fecha de asignaci\xF3n es requerida "),e())}function ve(o,n){o&1&&(t(0,"mat-error"),r(1," El estado es requerido "),e())}function Ce(o,n){if(o&1){let i=D();t(0,"form",5),x("ngSubmit",function(){_(i);let s=g();return E(s.onSubmit())}),t(1,"div",6),r(2,"Informaci\xF3n Personal"),e(),t(3,"div",7)(4,"mat-form-field",8)(5,"mat-label"),r(6,"Tipo Persona *"),e(),t(7,"mat-select",9)(8,"mat-option",10),r(9,"Persona F\xEDsica"),e(),t(10,"mat-option",11),r(11,"Persona Jur\xEDdica"),e()(),u(12,ue,2,0,"mat-error",12),e(),t(13,"mat-form-field",8)(14,"mat-label"),r(15,"Nombre/Raz\xF3n Social *"),e(),c(16,"input",13),u(17,ce,2,0,"mat-error",12),e(),t(18,"mat-form-field",8)(19,"mat-label"),r(20,"DNI/CUIT *"),e(),c(21,"input",14),u(22,pe,2,0,"mat-error",12),e()(),t(23,"div",7)(24,"mat-form-field",8)(25,"mat-label"),r(26,"Representante Legal *"),e(),c(27,"input",15),u(28,se,2,0,"mat-error",12),e(),t(29,"mat-form-field",8)(30,"mat-label"),r(31,"Email *"),e(),c(32,"input",16),u(33,fe,2,0,"mat-error",12)(34,ge,2,0,"mat-error",12),e(),t(35,"mat-form-field",8)(36,"mat-label"),r(37,"Tel\xE9fono *"),e(),c(38,"input",17),u(39,_e,2,0,"mat-error",12),e()(),t(40,"div",7)(41,"mat-form-field",8)(42,"mat-label"),r(43,"Domicilio *"),e(),c(44,"input",18),u(45,Ee,2,0,"mat-error",12),e(),t(46,"mat-form-field",8)(47,"mat-label"),r(48,"Fecha de Asignaci\xF3n *"),e(),c(49,"input",19),t(50,"mat-hint"),r(51,"DD/MM/AAAA"),e(),c(52,"mat-datepicker-toggle",20)(53,"mat-datepicker",null,0),u(55,xe,2,0,"mat-error",12),e(),t(56,"mat-form-field",8)(57,"mat-label"),r(58,"Estado *"),e(),t(59,"mat-select",21)(60,"mat-option",22),r(61,"Activo"),e(),t(62,"mat-option",23),r(63,"Inactivo"),e(),t(64,"mat-option",24),r(65,"Suspendido"),e(),t(66,"mat-option",25),r(67,"Pendiente"),e()(),u(68,ve,2,0,"mat-error",12),e()(),t(69,"div",6),r(70,"Informaci\xF3n Adicional"),e(),t(71,"div",26)(72,"mat-form-field",8)(73,"mat-label"),r(74,"Descripci\xF3n"),e(),c(75,"textarea",27),e()(),t(76,"div",26)(77,"mat-form-field",8)(78,"mat-label"),r(79,"Observaciones"),e(),c(80,"textarea",28),e()(),t(81,"div",29)(82,"button",30),x("click",function(){_(i);let s=g();return E(s.onCancel())}),r(83," Cancelar "),e(),t(84,"button",31),x("click",function(){_(i);let s=g();return E(s.onSubmit())}),r(85),e()()()}if(o&2){let i,d,s,v,C,h,b,T,I,M,S=q(54),l=g();m("formGroup",l.form),a(12),m("ngIf",(i=l.form.get("TipoPersona"))==null?null:i.hasError("required")),a(5),m("ngIf",(d=l.form.get("Nombre"))==null?null:d.hasError("required")),a(5),m("ngIf",(s=l.form.get("DniCuit"))==null?null:s.hasError("required")),a(6),m("ngIf",(v=l.form.get("RepresentanteLegal"))==null?null:v.hasError("required")),a(5),m("ngIf",(C=l.form.get("Email"))==null?null:C.hasError("required")),a(),m("ngIf",(h=l.form.get("Email"))==null?null:h.hasError("email")),a(5),m("ngIf",(b=l.form.get("Telefono"))==null?null:b.hasError("required")),a(6),m("ngIf",(T=l.form.get("Domicilio"))==null?null:T.hasError("required")),a(4),m("matDatepicker",S),a(3),m("for",S),a(3),m("ngIf",(I=l.form.get("FechaAsignacion"))==null?null:I.hasError("required")),a(13),m("ngIf",(M=l.form.get("Estado"))==null?null:M.hasError("required")),a(17),P(" ",l.saving?"Guardando...":"Actualizar Titular"," ")}}function he(o,n){o&1&&(t(0,"div",32)(1,"p"),r(2,"Cargando datos del titular..."),e()())}var de=class o{constructor(n,i,d,s){this.fb=n;this.titularService=i;this.router=d;this.route=s;this.form=this.fb.group({Nombre:["",p.required],TipoPersona:["",p.required],DniCuit:["",p.required],Domicilio:["",p.required],Telefono:["",p.required],Email:["",[p.required,p.email]],FechaAsignacion:["",p.required],Estado:["",p.required],RepresentanteLegal:["",p.required],Observaciones:[""],Descripcion:[""]})}form;loading=!0;saving=!1;titularId=null;ngOnInit(){this.route.params.subscribe(n=>{this.titularId=+n.id,this.titularId&&this.loadTitular(this.titularId)})}loadTitular(n){this.loading=!0,this.titularService.getById(n).subscribe({next:i=>{let d=new Date(i.FechaAsignacion);this.form.patchValue({Nombre:i.Nombre,TipoPersona:i.TipoPersona,DniCuit:i.DniCuit,Domicilio:i.Domicilio,Telefono:i.Telefono,Email:i.Email,FechaAsignacion:d,Estado:i.Estado,RepresentanteLegal:i.RepresentanteLegal,Observaciones:i.Observaciones,Descripcion:i.Descripcion}),this.loading=!1},error:i=>{console.error("Error al cargar titular:",i),alert("Error al cargar los datos del titular"),this.router.navigate(["/titulares"])}})}onSubmit(){if(console.log("onSubmit llamado - EDICI\xD3N"),console.log("Form valid:",this.form.valid),console.log("Form value:",this.form.value),console.log("titularId:",this.titularId),this.form.valid&&this.titularId){console.log("Formulario v\xE1lido, iniciando actualizaci\xF3n..."),this.saving=!0;let n=this.form.value;this.titularService.update(this.titularId,n).subscribe({next:i=>{console.log("Titular actualizado exitosamente:",i),alert("Titular minero actualizado exitosamente"),this.saving=!1,this.router.navigate(["/titulares"])},error:i=>{console.error("Error al actualizar titular:",i),alert("Error al actualizar el titular minero"),this.saving=!1}})}else console.log("Formulario inv\xE1lido o titularId faltante"),this.form.markAllAsTouched(),Object.keys(this.form.controls).forEach(n=>{let i=this.form.get(n);i&&i.errors&&console.log(`Error en ${n}:`,i.errors)})}onCancel(){this.router.navigate(["/titulares"])}static \u0275fac=function(i){return new(i||o)(f(j),f(le),f(O),f(N))};static \u0275cmp=F({type:o,selectors:[["app-titular-edit-form"]],decls:6,vars:2,consts:[["picker",""],[1,"form-container"],[1,"form-header"],["class","titular-form",3,"formGroup","ngSubmit",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"titular-form",3,"ngSubmit","formGroup"],[1,"section-title"],[1,"form-row"],["appearance","outline"],["formControlName","TipoPersona","required",""],["value","F\xEDsica"],["value","Jur\xEDdica"],[4,"ngIf"],["matInput","","formControlName","Nombre","required",""],["matInput","","formControlName","DniCuit","required",""],["matInput","","formControlName","RepresentanteLegal","required",""],["matInput","","type","email","formControlName","Email","required",""],["matInput","","formControlName","Telefono","required",""],["matInput","","formControlName","Domicilio","required",""],["matInput","","formControlName","FechaAsignacion","required","",3,"matDatepicker"],["matIconSuffix","",3,"for"],["formControlName","Estado","required",""],["value","Activo"],["value","Inactivo"],["value","Suspendido"],["value","Pendiente"],[1,"form-row","full-width"],["matInput","","formControlName","Descripcion","rows","2"],["matInput","","formControlName","Observaciones","rows","3"],[1,"form-actions"],["mat-button","","type","button",1,"cancel-btn",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click"],[1,"loading-container"]],template:function(i,d){i&1&&(t(0,"div",1)(1,"div",2)(2,"h2"),r(3,"Editar Titular Minero"),e()(),u(4,Ce,86,14,"form",3)(5,he,3,0,"div",4),e()),i&2&&(a(4),m("ngIf",!d.loading),a(),m("ngIf",d.loading))},dependencies:[w,y,B,V,A,k,R,L,z,G,Y,W,H,K,$,Q,re,te,J,U,ee,Z,X,ae,ie,oe,ne,me],styles:['@charset "UTF-8";.form-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.form-header[_ngcontent-%COMP%]{background:#416759;color:#fff;padding:18px 24px 10px;border-radius:8px 8px 0 0;margin-bottom:0}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:1.3rem}.titular-form[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:0 0 8px 8px;box-shadow:0 2px 8px #41675914}.section-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#416759;margin:24px 0 16px;padding-bottom:8px;border-bottom:2px solid #e8f0ec}.section-title[_ngcontent-%COMP%]:first-of-type{margin-top:0}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-bottom:16px}.form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:32px;padding-top:20px;border-top:1px solid #e0e0e0}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;height:40px;cursor:pointer!important;pointer-events:auto!important}.cancel-btn[_ngcontent-%COMP%]{color:#666}.loading-container[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:0 0 8px 8px;box-shadow:0 2px 8px #41675914;text-align:center}mat-error[_ngcontent-%COMP%]{font-size:.85rem}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-container[_ngcontent-%COMP%]{max-width:100%;margin:0 16px}}@media (max-width: 1024px) and (min-width: 769px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}']})};export{de as TitularEditFormComponent};
