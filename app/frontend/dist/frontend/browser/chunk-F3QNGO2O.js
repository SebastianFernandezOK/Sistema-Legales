import{a as me}from"./chunk-PVK2YKAR.js";import{a as ne}from"./chunk-H62BNP7K.js";import{c as ie,d as re,e as oe,f as ae}from"./chunk-CUCTTRDO.js";import{a as te}from"./chunk-UIXLCLYE.js";import{a as q,f as z}from"./chunk-5EQPP3UM.js";import{b as Z,c as ee}from"./chunk-GKRR3LY4.js";import{d as U,h as X,i as Y}from"./chunk-BOKKIAFZ.js";import{a as W}from"./chunk-6Y7QP5KE.js";import{b as L,c as J,f as K,i as Q}from"./chunk-M5CW5NFQ.js";import{c as N,e as x,g as T,h as O,m as w,n as V,p as A,q as G,v as R,w as j,x as B}from"./chunk-C2MAVCXR.js";import{Y as H,Z as $}from"./chunk-3B4OGLPL.js";import{Ac as k,Ga as o,Ib as c,Ic as I,Ka as u,Mb as r,Ob as h,Pb as _,Ra as F,Va as f,Xa as g,ga as v,ha as M,kb as n,lb as i,mb as e,nb as d,ua as y,ub as E,wb as b,zc as D}from"./chunk-FEQCTJNV.js";function de(m,t){m&1&&(i(0,"mat-error")(1,"span",25),r(2,"El nombre es obligatorio"),e()())}function pe(m,t){if(m&1&&(i(0,"mat-option",26),r(1),e()),m&2){let a=t.$implicit;n("value",a.IdTitular),o(),_(" ",a.Nombre," - ",a.DniCuit," ")}}function ce(m,t){if(m&1&&(i(0,"mat-option",26),r(1),e()),m&2){let a=t.$implicit;n("value",a),o(),h(" ",a," ")}}var le=class m{constructor(t,a,l){this.fb=t;this.propiedadService=a;this.titularService=l;this.form=this.fb.group({IdTitular:[null],Nombre:["",x.required],Solicitud:[null],Registro:[null],Notificacion:[null],Provincia:[""],Mensura:[null],AreaHectareas:[null],DescubrimientoDirecto:[""]})}modo="crear";propiedad=null;create=new g;update=new g;cancel=new g;form;titulares=[];provincias=[];ngOnInit(){this.loadTitulares(),this.loadProvincias(),this.modo==="editar"&&this.propiedad&&this.loadPropiedadData()}ngOnChanges(){this.modo==="editar"&&this.propiedad?this.loadPropiedadData():this.modo==="crear"&&this.form.reset()}loadTitulares(){this.titularService.getAll().subscribe({next:t=>{this.titulares=t},error:t=>{console.error("Error cargando titulares:",t)}})}loadProvincias(){this.provincias=this.propiedadService.getProvincias()}loadPropiedadData(){this.propiedad&&this.form.patchValue({IdTitular:this.propiedad.IdTitular,Nombre:this.propiedad.Nombre,Solicitud:this.propiedad.Solicitud,Registro:this.propiedad.Registro,Notificacion:this.propiedad.Notificacion,Provincia:this.propiedad.Provincia,Mensura:this.propiedad.Mensura,AreaHectareas:this.propiedad.AreaHectareas,DescubrimientoDirecto:this.propiedad.DescubrimientoDirecto})}onSubmit(){if(console.log("onSubmit llamado"),console.log("Formulario v\xE1lido:",this.form.valid),console.log("Valores del formulario:",this.form.value),this.form.valid){let t=this.form.value;this.modo==="crear"?(console.log("Emitiendo evento create con:",t),this.create.emit(t)):this.modo==="editar"&&this.propiedad&&(console.log("Emitiendo evento update con:",t),this.update.emit({id:this.propiedad.IdPropiedadMinera,data:t}))}else this.form.markAllAsTouched(),console.log("Formulario inv\xE1lido:",this.form.errors),Object.keys(this.form.controls).forEach(t=>{let a=this.form.get(t);a&&a.errors&&console.log(`Campo ${t} tiene errores:`,a.errors)})}onCancel(){this.cancel.emit()}static \u0275fac=function(a){return new(a||m)(u(R),u(te),u(me))};static \u0275cmp=F({type:m,selectors:[["app-propiedad-form"]],inputs:{modo:"modo",propiedad:"propiedad"},outputs:{create:"create",update:"update",cancel:"cancel"},features:[y],decls:64,vars:14,consts:[["solicitudPicker",""],["registroPicker",""],["notificacionPicker",""],["mensuraPicker",""],[1,"propiedad-form-card"],[1,"form-title"],[1,"propiedad-form-grid",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","Nombre","placeholder","Ingrese el nombre"],[4,"ngIf"],["formControlName","IdTitular"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","Provincia"],["matInput","","formControlName","AreaHectareas","type","number","step","0.01","placeholder","0.00"],["matInput","","formControlName","Solicitud","placeholder","dd/mm/yyyy","dateFormat","",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","formControlName","Registro","placeholder","dd/mm/yyyy","dateFormat","",3,"matDatepicker"],["matInput","","formControlName","Notificacion","placeholder","dd/mm/yyyy","dateFormat","",3,"matDatepicker"],["matInput","","formControlName","Mensura","placeholder","dd/mm/yyyy","dateFormat","",3,"matDatepicker"],["appearance","fill",1,"full-width"],["matInput","","formControlName","DescubrimientoDirecto","placeholder","Describa el descubrimiento directo","rows","3"],[1,"form-actions","full-width"],["mat-raised-button","","color","primary","type","submit"],["mat-button","","type","button",2,"margin-left","1rem",3,"click"],[2,"color","red"],[3,"value"]],template:function(a,l){if(a&1){let p=E();i(0,"mat-card",4)(1,"h2",5),r(2),e(),i(3,"form",6),b("ngSubmit",function(){return v(p),M(l.onSubmit())}),i(4,"mat-form-field",7)(5,"mat-label"),r(6,"Nombre de la Propiedad"),e(),d(7,"input",8),f(8,de,3,0,"mat-error",9),e(),i(9,"mat-form-field",7)(10,"mat-label"),r(11,"Titular Minero"),e(),i(12,"mat-select",10)(13,"mat-option",11),r(14,"Seleccione un titular"),e(),f(15,pe,2,3,"mat-option",12),e()(),i(16,"mat-form-field",7)(17,"mat-label"),r(18,"Provincia"),e(),i(19,"mat-select",13)(20,"mat-option",11),r(21,"Seleccione una provincia"),e(),f(22,ce,2,2,"mat-option",12),e()(),i(23,"mat-form-field",7)(24,"mat-label"),r(25,"\xC1rea (Hect\xE1reas)"),e(),d(26,"input",14),e(),i(27,"mat-form-field",7)(28,"mat-label"),r(29,"Fecha de Solicitud"),e(),d(30,"input",15)(31,"mat-datepicker-toggle",16)(32,"mat-datepicker",null,0),e(),i(34,"mat-form-field",7)(35,"mat-label"),r(36,"Fecha de Registro"),e(),d(37,"input",17)(38,"mat-datepicker-toggle",16)(39,"mat-datepicker",null,1),e(),i(41,"mat-form-field",7)(42,"mat-label"),r(43,"Fecha de Notificaci\xF3n"),e(),d(44,"input",18)(45,"mat-datepicker-toggle",16)(46,"mat-datepicker",null,2),e(),i(48,"mat-form-field",7)(49,"mat-label"),r(50,"Fecha de Mensura"),e(),d(51,"input",19)(52,"mat-datepicker-toggle",16)(53,"mat-datepicker",null,3),e(),i(55,"mat-form-field",20)(56,"mat-label"),r(57,"Descubrimiento Directo"),e(),d(58,"textarea",21),e(),i(59,"div",22)(60,"button",23),r(61),e(),i(62,"button",24),b("click",function(){return v(p),M(l.onCancel())}),r(63," Cancelar "),e()()()()}if(a&2){let p,s=c(33),C=c(40),S=c(47),P=c(54);o(2),h("",l.modo==="editar"?"Editar":"Crear"," Propiedad Minera"),o(),n("formGroup",l.form),o(5),n("ngIf",((p=l.form.get("Nombre"))==null?null:p.hasError("required"))&&((p=l.form.get("Nombre"))==null?null:p.touched)),o(7),n("ngForOf",l.titulares),o(7),n("ngForOf",l.provincias),o(8),n("matDatepicker",s),o(),n("for",s),o(6),n("matDatepicker",C),o(),n("for",C),o(6),n("matDatepicker",S),o(),n("for",S),o(6),n("matDatepicker",P),o(),n("for",P),o(9),h(" ",l.modo==="editar"?"Guardar Cambios":"Crear Propiedad Minera"," ")}},dependencies:[I,D,k,j,w,N,V,T,O,B,A,G,W,Q,L,J,K,ee,Z,$,H,Y,X,U,z,q,ae,ie,re,oe,ne],styles:[".propiedad-form-card[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:2rem 2.5rem 1.5rem}.form-title[_ngcontent-%COMP%]{color:#416759;font-size:1.5rem;font-weight:700;margin-bottom:1.5rem;text-align:center}.propiedad-form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1.2rem 2rem}.full-width[_ngcontent-%COMP%]{grid-column:1/4}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1rem}mat-form-field[_ngcontent-%COMP%]{width:100%}"]})};export{le as a};
