import{a as O}from"./chunk-F3QNGO2O.js";import"./chunk-PVK2YKAR.js";import"./chunk-H62BNP7K.js";import"./chunk-CUCTTRDO.js";import{a as S}from"./chunk-UIXLCLYE.js";import"./chunk-5EQPP3UM.js";import"./chunk-MS4AQ6UA.js";import"./chunk-GKRR3LY4.js";import"./chunk-BOKKIAFZ.js";import"./chunk-6Y7QP5KE.js";import"./chunk-M5CW5NFQ.js";import"./chunk-6J5RYYQJ.js";import"./chunk-KCUSWNL7.js";import{a as I,b as M}from"./chunk-LTI5L47W.js";import"./chunk-G6RQVBEQ.js";import"./chunk-C2MAVCXR.js";import"./chunk-7U2T7U2W.js";import{Y as y,Z as w}from"./chunk-3B4OGLPL.js";import{a as b,c as C}from"./chunk-OL3NKZYM.js";import{Ac as P,Ga as n,Ic as h,Ka as m,Mb as d,Ob as _,Ra as v,Va as x,ga as u,ha as f,kb as p,lb as a,mb as o,ub as E,wb as g,yb as s}from"./chunk-FEQCTJNV.js";import{a as l}from"./chunk-TSRGIXR5.js";function z(t,i){t&1&&(a(0,"div",8),d(1," Cargando propiedad minera... "),o())}function R(t,i){if(t&1){let e=E();a(0,"app-propiedad-form",9),g("update",function(c){u(e);let T=s();return f(T.onUpdate(c))})("cancel",function(){u(e);let c=s();return f(c.volver())}),o()}if(t&2){let e=s();p("propiedad",e.propiedad)}}function V(t,i){t&1&&(a(0,"div",10),d(1," Propiedad minera no encontrada "),o())}function j(t,i){if(t&1&&(a(0,"div",11),d(1),o()),t&2){let e=s();n(),_(" Error al cargar la propiedad minera: ",e.loadError," ")}}function A(t,i){t&1&&(a(0,"div",12),d(1," \u2705 Propiedad minera actualizada correctamente "),o())}function B(t,i){if(t&1&&(a(0,"div",11),d(1),o()),t&2){let e=s();n(),_(" \u274C Error al actualizar la propiedad minera: ",e.updateError," ")}}var k=class t{constructor(i,e,r){this.propiedadService=i;this.router=e;this.route=r;this.propiedadId=+this.route.snapshot.params.id}propiedad=null;loading=!0;loadError=null;success=!1;updateError=null;propiedadId;ngOnInit(){this.loadPropiedad()}loadPropiedad(){this.loading=!0,this.loadError=null,this.propiedadService.getPropiedadById(this.propiedadId).subscribe({next:i=>{this.propiedad=i,this.loading=!1},error:i=>{console.error("Error cargando propiedad:",i),this.loadError=i.message||"Error desconocido",this.loading=!1}})}onUpdate(i){this.success=!1,this.updateError=null,this.propiedadService.updatePropiedad(i.id,i.data).subscribe({next:e=>{console.log("Propiedad actualizada:",e),this.success=!0,this.propiedad&&(this.propiedad=l(l({},this.propiedad),e)),setTimeout(()=>{this.router.navigate(["/propiedades"])},2e3)},error:e=>{console.error("Error actualizando propiedad:",e),this.updateError=e.message||"Error desconocido",setTimeout(()=>{this.updateError=null},5e3)}})}volver(){this.router.navigate(["/propiedades"])}static \u0275fac=function(e){return new(e||t)(m(S),m(C),m(b))};static \u0275cmp=v({type:t,selectors:[["app-propiedad-edit"]],decls:14,vars:6,consts:[[1,"edit-container"],[1,"header-section"],["mat-button","",1,"back-fancy-btn",3,"click"],["class","loading-message",4,"ngIf"],["modo","editar",3,"propiedad","update","cancel",4,"ngIf"],["class","not-found-message",4,"ngIf"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"loading-message"],["modo","editar",3,"update","cancel","propiedad"],[1,"not-found-message"],[1,"error-message"],[1,"success-message"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),g("click",function(){return r.volver()}),a(3,"mat-icon"),d(4,"arrow_back"),o(),d(5," Volver a Propiedades "),o(),a(6,"h1"),d(7,"Editar Propiedad Minera"),o()(),x(8,z,2,0,"div",3)(9,R,1,1,"app-propiedad-form",4)(10,V,2,0,"div",5)(11,j,2,1,"div",6)(12,A,2,0,"div",7)(13,B,2,1,"div",6),o()),e&2&&(n(8),p("ngIf",r.loading),n(),p("ngIf",!r.loading&&r.propiedad),n(),p("ngIf",!r.loading&&!r.propiedad&&!r.loadError),n(),p("ngIf",r.loadError),n(),p("ngIf",r.success),n(),p("ngIf",r.updateError))},dependencies:[h,P,w,y,M,I,O],styles:[".edit-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:1rem}.header-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;margin-bottom:2rem}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#416759;font-size:1.8rem;font-weight:600;margin:0}.back-fancy-btn[_ngcontent-%COMP%]{box-shadow:0 2px 8px #4167591a,0 1.5px 4px #0000001a;border-radius:16px;background:#fff;color:#416759;border:1.5px solid #e0e0e0;transition:box-shadow .25s cubic-bezier(.4,0,.2,1),transform .18s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;gap:8px;padding:8px 16px}.back-fancy-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #4167592e,0 3px 8px #00000021;background:#f4faf7;color:#335248;transform:translateY(-2px) scale(1.02)}.loading-message[_ngcontent-%COMP%]{color:#666;text-align:center;padding:2rem;font-size:1.1rem}.not-found-message[_ngcontent-%COMP%]{color:#ff9800;background:#fff3e0;padding:1rem;border-radius:8px;text-align:center;font-weight:500}.success-message[_ngcontent-%COMP%]{color:#2e7d32;background:#e8f5e9;padding:1rem;border-radius:8px;margin-top:1rem;text-align:center;font-weight:500}.error-message[_ngcontent-%COMP%]{color:#d32f2f;background:#ffebee;padding:1rem;border-radius:8px;margin-top:1rem;text-align:center;font-weight:500}"]})};export{k as PropiedadEditComponent};
