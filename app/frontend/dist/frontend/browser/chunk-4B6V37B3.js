import{a as ue}from"./chunk-ZN7N3DZ7.js";import{c as oe,d as se,f as j,g as le}from"./chunk-PT2JM3JA.js";import{a as tt,b as it}from"./chunk-4I7E6TY2.js";import{a as et}from"./chunk-72DCKGH5.js";import{a as ct,b as mt}from"./chunk-EMY7YEHD.js";import{a as at,c as rt}from"./chunk-CN5NB4UJ.js";import{a as Ve,b as je,c as ze,d as $e,e as Le,f as Ue,g as He,h as Ge,i as qe,j as Xe,k as Ze}from"./chunk-JFHP4756.js";import{a as dt}from"./chunk-U5TTPYBI.js";import{a as lt}from"./chunk-H62BNP7K.js";import{c as nt,d as ot,e as st}from"./chunk-CUCTTRDO.js";import{a as ai,b as ri,c as ni,e as oi,f as si}from"./chunk-5EQPP3UM.js";import{b as K,c as W}from"./chunk-GKRR3LY4.js";import{d as Qe,h as Ke,i as We}from"./chunk-BOKKIAFZ.js";import{a as Q}from"./chunk-6Y7QP5KE.js";import{b as Z,f as Ye,i as Y}from"./chunk-M5CW5NFQ.js";import{b as Je}from"./chunk-6J5RYYQJ.js";import{a as ae}from"./chunk-KCUSWNL7.js";import{a as de,b as pe}from"./chunk-LTI5L47W.js";import{c as z,e as S,g as $,h as L,m as U,p as H,q as G,t as ie,u as Kt,v as q,x as X}from"./chunk-C2MAVCXR.js";import{l as Tt,m as Wt,n as Jt,q as Ft,u as ei,x as ti,y as ii}from"./chunk-7U2T7U2W.js";import{B as Xt,K as Zt,O as Yt,P as Qt,Q as It,X as Ne,Y as E,Z as w,a as Ht,t as Gt,z as qt}from"./chunk-3B4OGLPL.js";import{$ as Ce,Ac as Be,Cb as St,Db as Et,Eb as Ot,Ga as l,Ha as zt,Ib as ce,Ic as I,Ja as $t,Jb as kt,Ka as C,Kb as Pe,Lb as Ut,Mb as s,Nb as k,Ob as D,Oc as N,Pc as Ae,Qc as V,Ra as A,Sa as At,T as jt,Ta as Ee,Ua as Lt,Va as b,Vb as me,Xa as M,Y as P,Ya as Oe,Z as xt,Za as Mt,aa as B,ba as x,eb as ke,f as ne,fb as we,ga as v,gb as Ie,ha as g,k as Vt,ka as xe,kb as m,la as yt,lb as o,lc as De,mb as n,nb as p,o as R,ob as Te,oc as wt,pb as Fe,qb as ye,rb as J,sb as ee,ua as te,ub as y,wb as _,xa as Se,yb as f,zc as Re}from"./chunk-FEQCTJNV.js";import{a as O,b as Nt}from"./chunk-TSRGIXR5.js";var pt=class i{constructor(t){this.http=t}apiUrl=`${ae}/observaciones`;getByTransaccion(t,e=0,a=10){let r=e*a,c=r+a-1,u=new N().set("range",`[${r},${c}]`);return this.http.get(`${this.apiUrl}/${t}`,{params:u,observe:"response"}).pipe(R(d=>{let h=d.headers.get("Content-Range")||"",F=this.extractTotalFromRange(h);return{data:d.body||[],total:F}}))}extractTotalFromRange(t){let e=t.match(/\/(\d+)$/);return e?parseInt(e[1],10):0}createObservacion(t){return this.http.post(this.apiUrl,t)}updateObservacion(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}static \u0275fac=function(e){return new(e||i)(B(V))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};var ft=class i{constructor(t){this.fb=t;this.form=this.fb.group({Descripcion:["",S.required],Observaciones:[""]})}idTransaccion=null;create=new M;cancelar=new M;form;onSubmit(){if(!this.idTransaccion||this.form.invalid){console.log("Formulario inv\xE1lido o falta IdTransaccion");return}let t=this.form.value;if(!t.Descripcion||t.Descripcion.trim().length===0){console.warn("Descripci\xF3n vac\xEDa");return}let e=t.Descripcion.trim();if(["ERROR","XMLHttpRequest","CORS","TypeError","console.","stack trace"].some(c=>e.includes(c))){console.warn("Datos inv\xE1lidos detectados en descripci\xF3n, cancelando operaci\xF3n"),alert("Error: Se detectaron datos inv\xE1lidos en el formulario. Por favor, revise los campos.");return}if(e.length>200){alert("La descripci\xF3n no puede exceder 200 caracteres");return}let r={IdTransaccion:this.idTransaccion,Descripcion:e,Observaciones:t.Observaciones?.trim()||""};console.log("Creando observaci\xF3n v\xE1lida:",r),this.create.emit(r),this.form.reset()}volver(){this.cancelar.emit()}static \u0275fac=function(e){return new(e||i)(C(q))};static \u0275cmp=A({type:i,selectors:[["app-observacion-create"]],inputs:{idTransaccion:"idTransaccion"},outputs:{create:"create",cancelar:"cancelar"},decls:11,vars:2,consts:[[1,"observacion-form",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","Descripcion","required",""],["matInput","","formControlName","Observaciones"],["mat-raised-button","","color","primary","type","submit"]],template:function(e,a){e&1&&(o(0,"form",0),_("ngSubmit",function(){return a.onSubmit()}),o(1,"mat-form-field",1)(2,"mat-label"),s(3,"Descripci\xF3n"),n(),p(4,"input",2),n(),o(5,"mat-form-field",1)(6,"mat-label"),s(7,"Observaciones"),n(),p(8,"textarea",3),n(),o(9,"button",4),s(10,"Crear Observaci\xF3n"),n()()),e&2&&m("@fadeInUp",void 0)("formGroup",a.form)},dependencies:[I,Q,Y,Z,W,K,w,E,X,U,z,$,L,ie,H,G],styles:[".observacion-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;max-width:500px;margin:0 auto;position:relative}.close-btn[_ngcontent-%COMP%]{display:block;margin:1.5rem auto;position:static;background:#fff;border-radius:6px;z-index:2}"],data:{animation:[oe("fadeInUp",[le(":enter",[j({opacity:0,transform:"translateY(30px)"}),se("400ms cubic-bezier(.35,0,.25,1)",j({opacity:1,transform:"none"}))])])]}})};var ht=class i{constructor(t){this.fb=t;this.form=this.fb.group({Descripcion:["",S.required],Observaciones:[""]})}observacion=null;update=new M;cancelar=new M;form;ngOnChanges(){this.observacion?this.form.patchValue({Descripcion:this.observacion.Descripcion,Observaciones:this.observacion.Observaciones}):this.form.reset()}onSubmit(){if(!this.observacion)return;let t=O(O({},this.observacion),this.form.value);this.update.emit(t),this.form.reset()}volver(){this.cancelar.emit()}static \u0275fac=function(e){return new(e||i)(C(q))};static \u0275cmp=A({type:i,selectors:[["app-observacion-edit"]],inputs:{observacion:"observacion"},outputs:{update:"update",cancelar:"cancelar"},features:[te],decls:11,vars:2,consts:[[1,"observacion-form",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","Descripcion","required",""],["matInput","","formControlName","Observaciones"],["mat-raised-button","","color","primary","type","submit"]],template:function(e,a){e&1&&(o(0,"form",0),_("ngSubmit",function(){return a.onSubmit()}),o(1,"mat-form-field",1)(2,"mat-label"),s(3,"Descripci\xF3n"),n(),p(4,"input",2),n(),o(5,"mat-form-field",1)(6,"mat-label"),s(7,"Observaciones"),n(),p(8,"textarea",3),n(),o(9,"button",4),s(10,"Guardar Cambios"),n()()),e&2&&m("@fadeInUp",void 0)("formGroup",a.form)},dependencies:[I,Q,Y,Z,W,K,w,E,X,U,z,$,L,ie,H,G],styles:[".observacion-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;max-width:500px;margin:0 auto;position:relative}.close-btn[_ngcontent-%COMP%]{display:block;margin:1.5rem auto;position:static;background:#fff;border-radius:6px;z-index:2}"],data:{animation:[oe("fadeInUp",[le(":enter",[j({opacity:0,transform:"translateY(30px)"}),se("400ms cubic-bezier(.35,0,.25,1)",j({opacity:1,transform:"none"}))])])]}})};var li=()=>["Descripcion","Observaciones","actions"],Mi=()=>[5,10,25,50];function Si(i,t){if(i&1&&(o(0,"mat-chip",7),s(1),n()),i&2){let e=f();l(),k(e.observaciones.length)}}function Ei(i,t){if(i&1){let e=y();o(0,"button",8),_("click",function(){v(e);let r=f();return g(r.onNuevaObservacion())}),o(1,"mat-icon"),s(2,"add_comment"),n(),s(3," Nueva Observaci\xF3n "),n()}}function Oi(i,t){if(i&1){let e=y();o(0,"button",9),_("click",function(){v(e);let r=f();return r.mostrarFormulario=!1,r.editando=!1,g(r.observacionEdit=null)}),s(1," Cerrar "),n()}}function ki(i,t){if(i&1){let e=y();o(0,"div")(1,"app-observacion-create",10),_("create",function(r){v(e);let c=f();return g(c.onCrearObservacion(r))})("cancelar",function(){v(e);let r=f();return r.mostrarFormulario=!1,r.editando=!1,g(r.observacionEdit=null)}),n()()}if(i&2){let e=f();l(),m("idTransaccion",e.idTransaccion)}}function wi(i,t){if(i&1){let e=y();o(0,"div")(1,"app-observacion-edit",11),_("update",function(r){v(e);let c=f();return g(c.onActualizarObservacion(r))})("cancelar",function(){v(e);let r=f();return r.mostrarFormulario=!1,r.editando=!1,g(r.observacionEdit=null)}),n()()}if(i&2){let e=f();l(),m("observacion",e.observacionEdit)}}function Ii(i,t){i&1&&(o(0,"div",15),p(1,"mat-spinner",16),o(2,"p"),s(3,"Cargando observaciones..."),n()())}function Ti(i,t){i&1&&(o(0,"th",27),s(1,"Descripci\xF3n"),n())}function Fi(i,t){if(i&1&&(o(0,"td",28),s(1),n()),i&2){let e=t.$implicit;l(),k(e.Descripcion)}}function Pi(i,t){i&1&&(o(0,"th",27),s(1,"Observaciones"),n())}function Di(i,t){if(i&1&&(o(0,"td",28),s(1),n()),i&2){let e=t.$implicit;l(),k(e.Observaciones)}}function Ri(i,t){i&1&&(o(0,"th",27),s(1,"Acciones"),n())}function Bi(i,t){if(i&1){let e=y();o(0,"td",28)(1,"button",29),_("click",function(){let r=v(e).$implicit,c=f(3);return g(c.onEditarObservacion(r))}),o(2,"mat-icon"),s(3,"edit"),n()()()}}function Ni(i,t){i&1&&p(0,"tr",30)}function Vi(i,t){i&1&&p(0,"tr",31)}function ji(i,t){if(i&1){let e=y();o(0,"div",17)(1,"table",18),J(2,19),b(3,Ti,2,0,"th",20)(4,Fi,2,1,"td",21),ee(),J(5,22),b(6,Pi,2,0,"th",20)(7,Di,2,1,"td",21),ee(),J(8,23),b(9,Ri,2,0,"th",20)(10,Bi,4,0,"td",21),ee(),b(11,Ni,1,0,"tr",24)(12,Vi,1,0,"tr",25),n(),o(13,"mat-paginator",26),_("page",function(r){v(e);let c=f(2);return g(c.onPageChange(r))}),n()()}if(i&2){let e=f(2);l(),m("dataSource",e.observaciones),l(10),m("matHeaderRowDef",me(7,li)),l(),m("matRowDefColumns",me(8,li)),l(),m("length",e.totalObservaciones)("pageSize",e.pageSize)("pageIndex",e.currentPage)("pageSizeOptions",me(9,Mi))}}function zi(i,t){i&1&&(o(0,"div",32)(1,"mat-icon"),s(2,"info"),n(),o(3,"p"),s(4,"No hay observaciones asociadas a este expediente."),n()())}function $i(i,t){if(i&1&&(o(0,"div"),b(1,Ii,4,0,"div",12)(2,ji,14,10,"div",13)(3,zi,5,0,"div",14),n()),i&2){let e=f();l(),m("ngIf",e.loading),l(),m("ngIf",e.observaciones.length>0&&!e.loading),l(),m("ngIf",e.observaciones.length===0&&!e.loading)}}var ci=class i{constructor(t){this.observacionesService=t}observaciones=[];idTransaccion=null;totalObservaciones=0;pageSize=5;currentPage=0;loading=!1;mostrarFormulario=!1;editando=!1;observacionEdit=null;ngOnInit(){this.idTransaccion&&this.loadObservaciones()}ngOnChanges(t){t.idTransaccion&&t.idTransaccion.currentValue&&(this.currentPage=0,this.loadObservaciones(0,this.pageSize))}loadObservaciones(t=0,e=this.pageSize){this.idTransaccion&&(this.loading=!0,this.observacionesService.getByTransaccion(this.idTransaccion,t,e).subscribe({next:a=>{this.observaciones=a.data,this.totalObservaciones=a.total,this.loading=!1},error:()=>{this.observaciones=[],this.totalObservaciones=0,this.loading=!1}}))}onPageChange(t){this.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.loadObservaciones(this.currentPage,this.pageSize)}onCrearObservacion(t){this.editando=!1,this.observacionEdit=null,this.observacionesService.createObservacion(t).subscribe({next:e=>{this.loadObservaciones(this.currentPage,this.pageSize),this.mostrarFormulario=!1}})}onEditarObservacion(t){this.observacionEdit=O({},t),this.editando=!0,this.mostrarFormulario=!0}onActualizarObservacion(t){this.editando&&this.observacionEdit&&this.observacionesService.updateObservacion(this.observacionEdit.IdTransaccion,t).subscribe({next:e=>{this.loadObservaciones(this.currentPage,this.pageSize),this.editando=!1,this.observacionEdit=null,this.mostrarFormulario=!1}})}onNuevaObservacion(){this.editando=!1,this.observacionEdit=null,this.mostrarFormulario=!0}static \u0275fac=function(e){return new(e||i)(C(pt))};static \u0275cmp=A({type:i,selectors:[["app-observaciones-tab"]],inputs:{idTransaccion:"idTransaccion"},features:[te],decls:11,vars:6,consts:[[1,"header-row"],[1,"section-title"],["class","count-chip",4,"ngIf"],[1,"spacer"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","class","close-btn","aria-label","Cerrar",3,"click",4,"ngIf"],[4,"ngIf"],[1,"count-chip"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","","aria-label","Cerrar",1,"close-btn",3,"click"],[3,"create","cancelar","idTransaccion"],[3,"update","cancelar","observacion"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"loading-container"],["diameter","32"],[1,"table-container"],["mat-table","",1,"observaciones-table","mat-elevation-4",3,"dataSource"],["matColumnDef","Descripcion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Observaciones"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"page","length","pageSize","pageIndex","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary","matTooltip","Editar",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data"]],template:function(e,a){e&1&&(o(0,"div")(1,"div",0)(2,"span",1),s(3,"Observaciones Asociadas"),n(),b(4,Si,2,1,"mat-chip",2),p(5,"span",3),b(6,Ei,4,0,"button",4),n(),b(7,Oi,2,0,"button",5)(8,ki,2,1,"div",6)(9,wi,2,1,"div",6)(10,$i,4,3,"div",6),n()),e&2&&(l(4),m("ngIf",!a.mostrarFormulario&&a.observaciones.length>0),l(2),m("ngIf",!a.mostrarFormulario),l(),m("ngIf",a.mostrarFormulario),l(),m("ngIf",a.mostrarFormulario&&!a.editando),l(),m("ngIf",a.mostrarFormulario&&a.editando),l(),m("ngIf",!a.mostrarFormulario))},dependencies:[I,Be,Ze,Ve,ze,He,$e,je,Ge,Le,Ue,qe,Xe,w,E,Ne,pe,de,rt,at,et,Je,mt,ct,it,tt,ft,ht],styles:[".observaciones-tab[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem}.observaciones-tab[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.observaciones-tab[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:1.5rem;background:#f8f9fa;border-radius:6px;padding:1rem;box-shadow:0 1px 2px #0000000a}.observaciones-tab[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.85em;color:#888;margin-top:.5em}",".header-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.section-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.count-chip[_ngcontent-%COMP%]{margin-left:.5rem}.table-container[_ngcontent-%COMP%]{margin-top:1rem;overflow:hidden!important;width:100%!important}.no-data[_ngcontent-%COMP%]{color:#888;text-align:center;margin-top:2rem}.observaciones-table[_ngcontent-%COMP%]{width:100%!important;table-layout:fixed!important}.observaciones-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word!important;word-break:break-word!important;white-space:normal!important;max-width:300px!important;overflow:hidden!important;text-overflow:ellipsis;vertical-align:top!important;padding:8px!important}.observaciones-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{word-wrap:break-word!important;padding:8px!important}.observaciones-table[_ngcontent-%COMP%]   .mat-column-Descripcion[_ngcontent-%COMP%]{width:30%!important;max-width:250px!important}.observaciones-table[_ngcontent-%COMP%]   .mat-column-Observaciones[_ngcontent-%COMP%]{width:50%!important;max-width:350px!important}.observaciones-table[_ngcontent-%COMP%]   .mat-column-IdTransaccion[_ngcontent-%COMP%], .observaciones-table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{width:10%!important;max-width:80px!important}"]})};var re=class i{constructor(t){this.http=t}baseUrl=`${ae}/alertas`;createAlerta(t){return this.http.post(this.baseUrl,t)}updateAlerta(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}getByActaId(t,e=0,a=10,r){let c=e*a,u=c+a-1,d=new N().set("range",`[${c},${u}]`);return r!==void 0&&(d=d.set("id_estado",r.toString())),this.http.get(`${this.baseUrl}/by-parent?tipo_padre=acta&id_padre=${t}`,{params:d,observe:"response"}).pipe(R(h=>{let F=h.headers.get("Content-Range")||"",ge=this.extractTotalFromRange(F);return{data:h.body||[],total:ge}}))}getByResolucionId(t,e=0,a=10){let r=e*a,c=r+a-1,u=new N().set("range",`[${r},${c}]`);return this.http.get(`${this.baseUrl}/by-parent?tipo_padre=resolucion&id_padre=${t}`,{params:u,observe:"response"}).pipe(R(d=>{let h=d.headers.get("Content-Range")||"",F=this.extractTotalFromRange(h);return{data:d.body||[],total:F}}))}getByParent(t,e,a=0,r=10){let c=a*r,u=c+r-1,d=new N().set("range",`[${c},${u}]`);return this.http.get(`${this.baseUrl}/by-parent?tipo_padre=${t}&id_padre=${e}`,{params:d,observe:"response"}).pipe(R(h=>{let F=h.headers.get("Content-Range")||"",ge=this.extractTotalFromRange(F);return{data:h.body||[],total:ge}}))}getByTransaccion(t,e=0,a=10){let r=e*a,c=r+a-1,u=new N().set("range",`[${r},${c}]`);return this.http.get(`${this.baseUrl}/by-transaccion/${t}`,{params:u,observe:"response"}).pipe(R(d=>{let h=d.headers.get("Content-Range")||"",F=this.extractTotalFromRange(h);return{data:d.body||[],total:F}}))}extractTotalFromRange(t){let e=t.match(/\/(\d+)$/);return e?parseInt(e[1],10):0}static \u0275fac=function(e){return new(e||i)(B(V))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};var _e=class i{constructor(t){this.http=t}baseUrl="http://localhost:9000/tipo-alerta";getTiposAlerta(){return this.http.get(this.baseUrl)}static \u0275fac=function(e){return new(e||i)(B(V))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};var he=class i{constructor(t){this.http=t}apiUrl=`${ae}/periodicidad-alerta`;getPeriodicidades(){return this.http.get(this.apiUrl)}getPeriodicidad(t){return this.http.get(`${this.apiUrl}/${t}`)}createPeriodicidad(t){return this.http.post(this.apiUrl,t)}updatePeriodicidad(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deletePeriodicidad(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||i)(B(V))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};function Hi(i,t){if(i&1&&(o(0,"mat-option",20),s(1),n()),i&2){let e=t.$implicit;m("value",e.IdTipoAlerta),l(),k(e.Descripcion)}}function Gi(i,t){if(i&1&&(o(0,"mat-option",20),s(1),n()),i&2){let e=t.$implicit;m("value",e.IdEstado),l(),k(e.nombre)}}function qi(i,t){if(i&1&&(o(0,"mat-option",20),s(1),n()),i&2){let e=t.$implicit;m("value",e.IdPeriodicidad),l(),D(" ",e.Nombre," ")}}var vt=class i{constructor(t,e,a,r,c){this.fb=t;this.alertaService=e;this.tipoAlertaService=a;this.estadoAlertaService=r;this.periodicidadAlertaService=c;this.form=this.fb.group({IdTipoAlerta:[null,S.required],Asunto:["",S.required],Mensaje:["",S.required],IdEstado:[null,S.required],Estado:[""],Medio:[""],IdPeriodicidad:[null,S.required],FechaInicio:[null],FechaFin:[null],Destinatarios:[""],Obs:[""]})}idTransaccion=null;alerta=null;editando=!1;create=new M;cancelar=new M;form;tiposAlerta=[];estadosAlerta=[];periodicidades=[];ngOnInit(){this.tipoAlertaService.getTiposAlerta().subscribe(t=>this.tiposAlerta=t),this.estadoAlertaService.getEstadosAlerta().subscribe(t=>this.estadosAlerta=t),this.periodicidadAlertaService.getPeriodicidades().subscribe(t=>this.periodicidades=t),this.idTransaccion&&this.form.addControl("IdTransaccion",this.fb.control(this.idTransaccion)),this.editando&&this.alerta&&this.form.patchValue({Asunto:this.alerta.Asunto,Mensaje:this.alerta.Mensaje,IdEstado:this.alerta.IdEstado,Estado:this.alerta.Estado,Medio:this.alerta.Medio,IdPeriodicidad:this.alerta.IdPeriodicidad,FechaInicio:this.alerta.FechaInicio,FechaFin:this.alerta.FechaFin,Destinatarios:this.alerta.Destinatarios,Obs:this.alerta.Obs})}ngOnChanges(){this.editando&&this.alerta?this.form.patchValue({Asunto:this.alerta.Asunto,Mensaje:this.alerta.Mensaje,IdEstado:this.alerta.IdEstado,Estado:this.alerta.Estado,Medio:this.alerta.Medio,IdPeriodicidad:this.alerta.IdPeriodicidad,FechaInicio:this.alerta.FechaInicio,FechaFin:this.alerta.FechaFin,Destinatarios:this.alerta.Destinatarios,Obs:this.alerta.Obs}):this.form.reset()}onSubmit(){if(console.log("=== ALERTA onSubmit ==="),console.log("Form valid:",this.form.valid),console.log("Form value:",this.form.value),console.log("Form errors:",this.form.errors),this.form.invalid){console.log("Formulario de alerta inv\xE1lido - deteniendo"),this.form.markAllAsTouched();return}let t=Nt(O({},this.form.value),{IdTransaccion:this.idTransaccion});console.log("Valor a enviar:",t),this.editando&&this.alerta&&this.alerta.idAlerta?(console.log("Editando alerta ID:",this.alerta.idAlerta),this.alertaService.updateAlerta(this.alerta.idAlerta,t).subscribe({next:e=>{console.log("Alerta editada exitosamente:",e),this.create.emit(e),this.form.reset()},error:e=>{console.error("[AlertaCreate] Error al editar alerta:",e)}})):(console.log("Creando nueva alerta"),this.alertaService.createAlerta(t).subscribe({next:e=>{console.log("Alerta creada exitosamente:",e),this.create.emit(e),this.form.reset()},error:e=>{console.error("[AlertaCreate] Error al crear alerta:",e)}}))}static \u0275fac=function(e){return new(e||i)(C(q),C(re),C(_e),C(ue),C(he))};static \u0275cmp=A({type:i,selectors:[["app-alerta-create"]],inputs:{idTransaccion:"idTransaccion",alerta:"alerta",editando:"editando"},outputs:{create:"create",cancelar:"cancelar"},features:[te],decls:57,vars:10,consts:[["pickerInicio",""],["pickerFin",""],[1,"alerta-form",3,"ngSubmit","formGroup"],[1,"row-fields"],["appearance","fill",1,"third-width"],["formControlName","IdTipoAlerta","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","Asunto","required",""],["matInput","","formControlName","Mensaje","required",""],["formControlName","IdEstado","required",""],["matInput","","formControlName","Medio"],["formControlName","IdPeriodicidad","required",""],["appearance","fill",1,"full-width"],["matInput","","formControlName","Destinatarios","rows","3"],["matInput","","formControlName","FechaInicio","appDateFormat","",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","FechaFin","appDateFormat","",3,"matDatepicker"],["matInput","","formControlName","Obs"],[1,"button-row"],["mat-raised-button","","color","primary","type","submit"],[3,"value"]],template:function(e,a){if(e&1){let r=y();o(0,"form",2),_("ngSubmit",function(){return v(r),g(a.onSubmit())}),o(1,"div",3)(2,"mat-form-field",4)(3,"mat-label"),s(4,"Tipo de Alerta"),n(),o(5,"mat-select",5),b(6,Hi,2,2,"mat-option",6),n()(),o(7,"mat-form-field",4)(8,"mat-label"),s(9,"Asunto"),n(),p(10,"input",7),n(),o(11,"mat-form-field",4)(12,"mat-label"),s(13,"Mensaje"),n(),p(14,"textarea",8),n()(),o(15,"div",3)(16,"mat-form-field",4)(17,"mat-label"),s(18,"Estado"),n(),o(19,"mat-select",9),b(20,Gi,2,2,"mat-option",6),n()(),o(21,"mat-form-field",4)(22,"mat-label"),s(23,"Medio"),n(),p(24,"input",10),n(),o(25,"mat-form-field",4)(26,"mat-label"),s(27,"Periodicidad"),n(),o(28,"mat-select",11),b(29,qi,2,2,"mat-option",6),n()()(),o(30,"div",3)(31,"mat-form-field",12)(32,"mat-label"),s(33,"Destinatarios"),n(),p(34,"textarea",13),n()(),o(35,"div",3)(36,"mat-form-field",4)(37,"mat-label"),s(38,"Fecha Inicio"),n(),p(39,"input",14)(40,"mat-datepicker-toggle",15)(41,"mat-datepicker",null,0),n(),o(43,"mat-form-field",4)(44,"mat-label"),s(45,"Fecha Fin"),n(),p(46,"input",16)(47,"mat-datepicker-toggle",15)(48,"mat-datepicker",null,1),n(),o(50,"mat-form-field",4)(51,"mat-label"),s(52,"Observaciones"),n(),p(53,"textarea",17),n()(),o(54,"div",18)(55,"button",19),s(56),n()()()}if(e&2){let r=ce(42),c=ce(49);m("@fadeInUp",void 0)("formGroup",a.form),l(6),m("ngForOf",a.tiposAlerta),l(14),m("ngForOf",a.estadosAlerta),l(9),m("ngForOf",a.periodicidades),l(10),m("matDatepicker",r),l(),m("for",r),l(6),m("matDatepicker",c),l(),m("for",c),l(9),D(" ",a.editando?"Guardar Cambios":"Crear Alerta"," ")}},dependencies:[I,Re,Q,Y,Z,Ye,W,K,w,E,We,Ke,Qe,X,U,z,$,L,ie,H,G,dt,lt,nt,ot,st],styles:[".alerta-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;max-width:900px;margin:0 auto;position:relative}.row-fields[_ngcontent-%COMP%]{display:flex;gap:1rem}.third-width[_ngcontent-%COMP%]{width:33%;min-width:180px}.button-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}.close-btn[_ngcontent-%COMP%]{display:block;margin:1.5rem auto;position:static;background:#fff;border-radius:6px;z-index:2}"],data:{animation:[oe("fadeInUp",[le(":enter",[j({opacity:0,transform:"translateY(30px)"}),se("400ms cubic-bezier(.35,0,.25,1)",j({opacity:1,transform:"none"}))])])]}})};function Xi(i,t){if(i&1&&(o(0,"mat-option",22),s(1),n()),i&2){let e=t.$implicit;m("value",e.IdTipoAlerta),l(),k(e.Descripcion)}}function Zi(i,t){if(i&1&&(o(0,"mat-option",22),s(1),n()),i&2){let e=t.$implicit;m("value",e.IdEstado),l(),k(e.nombre)}}function Yi(i,t){if(i&1&&(o(0,"mat-option",22),s(1),n()),i&2){let e=t.$implicit;m("value",e.IdPeriodicidad),l(),D(" ",e.Nombre," ")}}var gt=class i{constructor(t,e,a,r,c){this.fb=t;this.alertaService=e;this.tipoAlertaService=a;this.estadoAlertaService=r;this.periodicidadAlertaService=c;this.form=this.fb.group({IdTipoAlerta:[null,S.required],Asunto:["",S.required],Mensaje:["",S.required],IdEstado:[null,S.required],Estado:[""],Medio:[""],IdPeriodicidad:[null,S.required],FechaInicio:[null],FechaFin:[null],Destinatarios:[""],Obs:[""]})}idTransaccion=null;alerta=null;update=new M;cancelar=new M;form;tiposAlerta=[];estadosAlerta=[];periodicidades=[];ngOnInit(){this.estadoAlertaService.getEstadosAlerta().subscribe(t=>this.estadosAlerta=t),this.tipoAlertaService.getTiposAlerta().subscribe(t=>this.tiposAlerta=t),this.periodicidadAlertaService.getPeriodicidades().subscribe(t=>this.periodicidades=t),this.alerta&&this.form.patchValue(this.alerta)}onSubmit(){console.log("=== ALERTA EDIT onSubmit ==="),console.log("Form valid:",this.form.valid),console.log("Form value:",this.form.value),console.log("Form errors:",this.form.errors),console.log("Alerta data:",this.alerta),Object.keys(this.form.controls).forEach(t=>{let e=this.form.get(t);e&&e.errors&&console.log(`ERROR en campo ${t}:`,e.errors)}),this.form.valid?(console.log("Emitiendo evento update con:",this.form.value),this.update.emit(this.form.value)):(console.log("Formulario de edici\xF3n de alerta inv\xE1lido - deteniendo"),this.form.markAllAsTouched())}onCancel(){this.cancelar.emit()}static \u0275fac=function(e){return new(e||i)(C(q),C(re),C(_e),C(ue),C(he))};static \u0275cmp=A({type:i,selectors:[["app-alerta-edit"]],inputs:{idTransaccion:"idTransaccion",alerta:"alerta"},outputs:{update:"update",cancelar:"cancelar"},decls:59,vars:8,consts:[["pickerInicio",""],["pickerFin",""],[1,"alerta-form",3,"ngSubmit","formGroup"],[1,"row-fields"],["appearance","fill",1,"third-width"],["formControlName","IdTipoAlerta","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","Asunto","required",""],["matInput","","formControlName","Mensaje","required",""],["formControlName","IdEstado","required",""],["matInput","","formControlName","Medio"],["formControlName","IdPeriodicidad","required",""],["appearance","fill",1,"full-width"],["matInput","","formControlName","Destinatarios","rows","3"],[1,"date-field-wrapper"],[1,"date-input-row"],["matInput","","formControlName","FechaInicio","appDateFormat","",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","FechaFin","appDateFormat","",3,"matDatepicker"],["matInput","","formControlName","Obs"],[1,"button-row"],["mat-raised-button","","color","primary","type","submit"],[3,"value"]],template:function(e,a){if(e&1){let r=y();o(0,"form",2),_("ngSubmit",function(){return v(r),g(a.onSubmit())}),o(1,"div",3)(2,"mat-form-field",4)(3,"mat-label"),s(4,"Tipo de Alerta"),n(),o(5,"mat-select",5),b(6,Xi,2,2,"mat-option",6),n()(),o(7,"mat-form-field",4)(8,"mat-label"),s(9,"Asunto"),n(),p(10,"input",7),n(),o(11,"mat-form-field",4)(12,"mat-label"),s(13,"Mensaje"),n(),p(14,"textarea",8),n()(),o(15,"div",3)(16,"mat-form-field",4)(17,"mat-label"),s(18,"Estado"),n(),o(19,"mat-select",9),b(20,Zi,2,2,"mat-option",6),n()(),o(21,"mat-form-field",4)(22,"mat-label"),s(23,"Medio"),n(),p(24,"input",10),n(),o(25,"mat-form-field",4)(26,"mat-label"),s(27,"Periodicidad"),n(),o(28,"mat-select",11),b(29,Yi,2,2,"mat-option",6),n()()(),o(30,"div",3)(31,"mat-form-field",12)(32,"mat-label"),s(33,"Destinatarios"),n(),p(34,"textarea",13),n()(),o(35,"div",3)(36,"mat-form-field",4)(37,"div",14)(38,"mat-label"),s(39,"Fecha Inicio"),n(),o(40,"div",15),p(41,"input",16)(42,"mat-datepicker-toggle",17),n(),p(43,"mat-datepicker",null,0),n()(),o(45,"mat-form-field",4)(46,"mat-label"),s(47,"Fecha Fin"),n(),p(48,"input",18)(49,"mat-datepicker-toggle",17)(50,"mat-datepicker",null,1),n(),o(52,"mat-form-field",4)(53,"mat-label"),s(54,"Observaciones"),n(),p(55,"textarea",19),n()(),o(56,"div",20)(57,"button",21),s(58,"Guardar Cambios"),n()()()}if(e&2){let r=ce(44),c=ce(51);m("formGroup",a.form),l(6),m("ngForOf",a.tiposAlerta),l(14),m("ngForOf",a.estadosAlerta),l(9),m("ngForOf",a.periodicidades),l(12),m("matDatepicker",r),l(),m("for",r),l(6),m("matDatepicker",c),l(),m("for",c)}},dependencies:[I,Re,Q,Y,Z,Ye,W,K,w,E,We,Ke,Qe,X,U,z,$,L,ie,H,G,dt,lt,nt,ot,st],styles:[".mat-select-panel[_ngcontent-%COMP%]{background:#fff!important;z-index:9999!important;position:fixed!important;box-shadow:0 4px 16px #0000001f}.mat-select-panel[_ngcontent-%COMP%]{background:#fff!important;z-index:1000!important;box-shadow:0 4px 16px #0000001f}.mat-select-panel[_ngcontent-%COMP%], .mat-option[_ngcontent-%COMP%]{background:#fff!important}.mat-select-value[_ngcontent-%COMP%]{background:#fff!important;border-radius:4px;padding:2px 8px}.alerta-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;max-width:900px;margin:0 auto;position:relative}.row-fields[_ngcontent-%COMP%]{display:flex;gap:1rem}.mat-form-field.third-width[_ngcontent-%COMP%]{background:#fff;border-radius:6px;box-shadow:0 2px 8px #0000000a}.third-width[_ngcontent-%COMP%]{width:33%;min-width:180px}.date-field-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem}.date-input-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.button-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}.close-btn[_ngcontent-%COMP%]{display:block;margin:1.5rem auto;position:static;background:#fff;border-radius:6px;z-index:2}"]})};var Qi=()=>[5,10,25];function Ki(i,t){if(i&1&&(o(0,"mat-chip",7),s(1),n()),i&2){let e=f();l(),k(e.alertas.length)}}function Wi(i,t){if(i&1){let e=y();o(0,"button",8),_("click",function(){v(e);let r=f();return g(r.mostrarFormulario=!0)}),o(1,"mat-icon"),s(2,"add_alert"),n(),s(3," Nueva Alerta "),n()}}function Ji(i,t){if(i&1){let e=y();o(0,"button",9),_("click",function(){v(e);let r=f();return r.mostrarFormulario=!1,r.editando=!1,g(r.alertaEdit=null)}),s(1," Cerrar "),n()}}function ea(i,t){if(i&1){let e=y();o(0,"div")(1,"app-alerta-create",10),_("create",function(r){v(e);let c=f();return g(c.onCrearAlerta(r))})("cancelar",function(){v(e);let r=f();return r.mostrarFormulario=!1,r.editando=!1,g(r.alertaEdit=null)}),n()()}if(i&2){let e=f();l(),m("idTransaccion",e.idTransaccion)}}function ta(i,t){if(i&1){let e=y();o(0,"div")(1,"app-alerta-edit",11),_("update",function(r){v(e);let c=f();return g(c.onActualizarAlerta(r))})("cancelar",function(){v(e);let r=f();return r.mostrarFormulario=!1,r.editando=!1,g(r.alertaEdit=null)}),n()()}if(i&2){let e=f();l(),m("idTransaccion",e.idTransaccion)("alerta",e.alertaEdit)}}function ia(i,t){i&1&&(o(0,"div",16),p(1,"mat-spinner",17),o(2,"p"),s(3,"Cargando alertas..."),n()())}function aa(i,t){i&1&&(o(0,"th",28),s(1,"Estado"),n())}function ra(i,t){if(i&1&&(o(0,"td",29),s(1),n()),i&2){let e=t.$implicit,a=f(3);l(),k(a.getEstadoNombre(e.IdEstado))}}function na(i,t){i&1&&(o(0,"th",28),s(1,"Asunto"),n())}function oa(i,t){if(i&1&&(o(0,"td",29),s(1),n()),i&2){let e=t.$implicit;l(),k(e.Asunto)}}function sa(i,t){i&1&&(o(0,"th",28),s(1,"Mensaje"),n())}function la(i,t){if(i&1&&(o(0,"td",29),s(1),n()),i&2){let e=t.$implicit;l(),k(e.Mensaje)}}function ca(i,t){i&1&&(o(0,"th",28),s(1,"Acciones"),n())}function ma(i,t){if(i&1){let e=y();o(0,"td",29)(1,"button",30)(2,"mat-icon"),s(3,"visibility"),n()(),o(4,"button",31),_("click",function(){let r=v(e).$implicit,c=f(3);return g(c.onEditarAlerta(r))}),o(5,"mat-icon"),s(6,"edit"),n()()()}}function da(i,t){i&1&&p(0,"tr",32)}function pa(i,t){i&1&&p(0,"tr",33)}function ua(i,t){if(i&1&&(o(0,"div",18)(1,"table",19),J(2,20),b(3,aa,2,0,"th",21)(4,ra,2,1,"td",22),ee(),J(5,23),b(6,na,2,0,"th",21)(7,oa,2,1,"td",22),ee(),J(8,24),b(9,sa,2,0,"th",21)(10,la,2,1,"td",22),ee(),J(11,25),b(12,ca,2,0,"th",21)(13,ma,7,0,"td",22),ee(),b(14,da,1,0,"tr",26)(15,pa,1,0,"tr",27),n()()),i&2){let e=f(2);l(),m("dataSource",e.alertas),l(13),m("matHeaderRowDef",e.displayedColumns),l(),m("matRowDefColumns",e.displayedColumns)}}function fa(i,t){i&1&&(o(0,"div",34)(1,"mat-icon"),s(2,"info"),n(),o(3,"p"),s(4,"No hay alertas asociadas a este expediente."),n()())}function ba(i,t){if(i&1){let e=y();o(0,"mat-paginator",35),_("page",function(r){v(e);let c=f(2);return g(c.onPageChange(r))}),n()}if(i&2){let e=f(2);m("length",e.totalAlertas)("pageSize",e.pageSize)("pageSizeOptions",me(3,Qi))}}function _a(i,t){if(i&1&&(o(0,"div"),b(1,ia,4,0,"div",12)(2,ua,16,3,"div",13)(3,fa,5,0,"div",14)(4,ba,1,4,"mat-paginator",15),n()),i&2){let e=f();l(),m("ngIf",e.loading),l(),m("ngIf",e.alertas.length>0&&!e.loading),l(),m("ngIf",e.alertas.length===0&&!e.loading),l(),m("ngIf",e.totalAlertas>0)}}var fi=class i{constructor(t,e){this.alertaService=t;this.estadoAlertaService=e}alertas=[];totalAlertas=0;pageSize=5;currentPage=0;loading=!1;estadosAlerta=[];idTransaccion=null;tipoPadre="acta";mostrarFormulario=!1;editando=!1;alertaEdit=null;displayedColumns=["Estado","Asunto","Mensaje","actions"];ngOnInit(){this.estadoAlertaService.getEstadosAlerta().subscribe(t=>{this.estadosAlerta=t}),this.idTransaccion&&this.loadAlertas()}ngOnChanges(t){t.idTransaccion&&t.idTransaccion.currentValue&&(this.currentPage=0,this.loadAlertas(0,this.pageSize))}loadAlertas(t=0,e=this.pageSize){this.idTransaccion&&(this.loading=!0,this.alertaService.getByTransaccion(this.idTransaccion,t,e).subscribe({next:a=>{this.alertas=a.data,this.totalAlertas=a.total,this.loading=!1},error:()=>{this.alertas=[],this.totalAlertas=0,this.loading=!1}}))}onPageChange(t){this.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.loadAlertas(this.currentPage,this.pageSize)}onCrearAlerta(t){this.loadAlertas(this.currentPage,this.pageSize),this.mostrarFormulario=!1}onActualizarAlerta(t){console.log("=== onActualizarAlerta recibido ==="),console.log("Datos para actualizar:",t),console.log("Alerta original:",this.alertaEdit),this.alertaEdit&&this.alertaEdit.idAlerta?(console.log("Actualizando alerta ID:",this.alertaEdit.idAlerta),this.alertaService.updateAlerta(this.alertaEdit.idAlerta,t).subscribe({next:e=>{console.log("Alerta actualizada exitosamente:",e),this.loadAlertas(this.currentPage,this.pageSize),this.editando=!1,this.alertaEdit=null,this.mostrarFormulario=!1},error:e=>{console.error("Error al actualizar alerta:",e)}})):console.error("No se encontr\xF3 el ID de la alerta para actualizar")}onEditarAlerta(t){this.alertaEdit=O({},t),this.editando=!0,this.mostrarFormulario=!0}getEstadoNombre(t){if(!t||!this.estadosAlerta.length)return"";let e=this.estadosAlerta.find(a=>a.IdEstado===t);return e?e.nombre:""}static \u0275fac=function(e){return new(e||i)(C(re),C(ue))};static \u0275cmp=A({type:i,selectors:[["app-alertas-list"]],inputs:{idTransaccion:"idTransaccion",tipoPadre:"tipoPadre"},features:[te],decls:11,vars:6,consts:[[1,"header-row"],[1,"section-title"],["class","count-chip",4,"ngIf"],[1,"spacer"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","class","close-btn","aria-label","Cerrar",3,"click",4,"ngIf"],[4,"ngIf"],[1,"count-chip"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","","aria-label","Cerrar",1,"close-btn",3,"click"],[3,"create","cancelar","idTransaccion"],[3,"update","cancelar","idTransaccion","alerta"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["class","no-data",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],[1,"loading-container"],["diameter","32"],[1,"table-container"],["mat-table","",1,"alertas-table","mat-elevation-4",3,"dataSource"],["matColumnDef","Estado"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Asunto"],["matColumnDef","Mensaje"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary","matTooltip","Ver"],["mat-icon-button","","color","primary","matTooltip","Editar",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data"],[3,"page","length","pageSize","pageSizeOptions"]],template:function(e,a){e&1&&(o(0,"div")(1,"div",0)(2,"span",1),s(3,"Alertas Asociadas"),n(),b(4,Ki,2,1,"mat-chip",2),p(5,"span",3),b(6,Wi,4,0,"button",4),n(),b(7,Ji,2,0,"button",5)(8,ea,2,1,"div",6)(9,ta,2,2,"div",6)(10,_a,5,4,"div",6),n()),e&2&&(l(4),m("ngIf",!a.mostrarFormulario&&a.alertas.length>0),l(2),m("ngIf",!a.mostrarFormulario),l(),m("ngIf",a.mostrarFormulario),l(),m("ngIf",a.mostrarFormulario&&!a.editando),l(),m("ngIf",a.mostrarFormulario&&a.editando),l(),m("ngIf",!a.mostrarFormulario))},dependencies:[I,Be,Ze,Ve,ze,He,$e,je,Ge,Le,Ue,qe,Xe,w,E,Ne,pe,de,rt,at,et,Je,mt,ct,it,tt,vt,gt],styles:[".header-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:12px}.section-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#333}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.count-chip[_ngcontent-%COMP%]{background:#416759;color:#fff;margin-left:8px}.close-btn[_ngcontent-%COMP%]{display:block;margin:0 0 1.5rem;position:relative;left:0;top:0;background:#fff;border-radius:6px;z-index:2}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.alertas-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .alertas-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#333}.no-data[_ngcontent-%COMP%]{color:#888;font-style:italic;margin-top:16px}.loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:16px 0}.clickable-row[_ngcontent-%COMP%]{cursor:pointer;transition:background .2s}.clickable-row[_ngcontent-%COMP%]:hover{background:#e6f2ed}"]})};function ha(i,t){i&1&&ye(0,"div",2)}var va=new Ce("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var Yn=(()=>{class i{_elementRef=x(Se);_ngZone=x(Oe);_changeDetectorRef=x(De);_renderer=x($t);_cleanupTransitionEnd;constructor(){let e=Qt(),a=x(va,{optional:!0});this._isNoopAnimation=e==="di-disabled",e==="reduced-motion"&&this._elementRef.nativeElement.classList.add("mat-progress-bar-reduced-motion"),a&&(a.color&&(this.color=this._defaultColor=a.color),this.mode=a.mode||this.mode)}_isNoopAnimation;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=bi(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=bi(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new M;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(a){return new(a||i)};static \u0275cmp=A({type:i,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(a,r){a&2&&(ke("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),Ut("mat-"+r.color),Pe("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",wt],bufferValue:[2,"bufferValue","bufferValue",wt],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(a,r){a&1&&(Te(0,"div",0),ye(1,"div",1),we(2,ha,1,0,"div",2),Fe(),Te(3,"div",3),ye(4,"span",4),Fe(),Te(5,"div",5),ye(6,"span",4),Fe()),a&2&&(l(),kt("flex-basis",r._getBufferBarFlexBasis()),l(),Ie(r.mode==="buffer"?2:-1),l(),kt("transform",r._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{--mat-progress-bar-animation-multiplier: 1;display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mat-progress-bar-reduced-motion{--mat-progress-bar-animation-multiplier: 2}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear;background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return i})();function bi(i,t=0,e=100){return Math.max(t,Math.min(e,i))}var Qn=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=At({type:i});static \u0275inj=xt({imports:[Zt]})}return i})();var Ct=class i{constructor(t){this.http=t}apiUrl=`${ae}/archivos`;getArchivos(t=0,e=100){let a=new N().set("skip",t.toString()).set("limit",e.toString());return this.http.get(`${this.apiUrl}/`,{params:a})}getArchivosByTransaccion(t){return this.http.get(`${this.apiUrl}/transaccion/${t}`)}getArchivosByExpediente(t){return this.http.get(`${this.apiUrl}/expediente/${t}`)}getArchivo(t){return this.http.get(`${this.apiUrl}/${t}`)}createArchivo(t){return this.http.post(`${this.apiUrl}/`,t)}uploadArchivo(t,e,a,r,c,u=1){let d=new FormData;return d.append("file",t),d.append("tipo",e),d.append("AudUsuario",u.toString()),a&&d.append("IdTransaccion",a.toString()),r&&d.append("Nombre",r),d.append("descripcion",c??""),this.http.post(`${this.apiUrl}/upload/${e}/${a}`,d,{reportProgress:!0,observe:"events"}).pipe(R(h=>h.type===Ae.UploadProgress&&h.total?{progress:Math.round(100*h.loaded/h.total),file:t}:h.type===Ae.Response?{progress:100,file:t,response:h.body}:{progress:0,file:t}))}updateArchivo(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deleteArchivo(t){return this.http.delete(`${this.apiUrl}/${t}`)}getDownloadUrl(t,e){return`${this.apiUrl}/download/${t}/${e}`}getArchivosByEntidad(t,e,a=1,r=10){return this.http.get(`${this.apiUrl}/${t}/${e}?page=${a}&limit=${r}`)}uploadArchivoEntidad(t,e,a,r,c=1){let u=new FormData;return u.append("file",t),u.append("aud_usuario",c.toString()),r&&u.append("descripcion",r),this.http.post(`${this.apiUrl}/upload/${e}/${a}`,u,{reportProgress:!0,observe:"events"}).pipe(R(d=>d.type===Ae.UploadProgress&&d.total?{progress:Math.round(100*d.loaded/d.total),file:t}:d.type===Ae.Response?{progress:100,file:t,response:d.body}:{progress:0,file:t}))}downloadArchivo(t,e){let a=new N().set("link",t).set("nombre",e);return this.http.get(`${this.apiUrl}/download`,{params:a,responseType:"blob"})}static \u0275fac=function(e){return new(e||i)(B(V))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})};var _i=class i{constructor(t,e){this.fb=t;this.archivoService=e;this.archivoForm=this.fb.group({descripcion:[""]})}archivo;archivoActualizado=new M;cancelar=new M;archivoForm;saving=!1;ngOnInit(){this.archivo&&this.archivoForm.patchValue({descripcion:this.archivo.Descripcion||""})}onSubmit(){if(this.archivoForm.invalid||!this.archivo)return;this.saving=!0;let t={Descripcion:this.archivoForm.get("descripcion")?.value};this.archivoService.updateArchivo(this.archivo.IdArchivo,t).subscribe({next:e=>{this.archivoActualizado.emit(e),this.saving=!1},error:e=>{console.error("Error al actualizar archivo:",e),this.saving=!1}})}onCancel(){this.cancelar.emit()}static \u0275fac=function(e){return new(e||i)(C(q),C(Ct))};static \u0275cmp=A({type:i,selectors:[["app-archivo-edit"]],inputs:{archivo:"archivo"},outputs:{archivoActualizado:"archivoActualizado",cancelar:"cancelar"},decls:26,vars:5,consts:[[1,"archivo-form"],[3,"ngSubmit","formGroup"],[1,"archivo-info"],["appearance","outline",1,"full-width"],["matInput","","formControlName","descripcion","rows","3","placeholder","Descripci\xF3n del archivo","maxlength","150"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,a){e&1&&(o(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),s(3,"Editar Archivo"),n()(),o(4,"mat-card-content")(5,"form",1),_("ngSubmit",function(){return a.onSubmit()}),o(6,"div",2)(7,"p")(8,"strong"),s(9,"Archivo actual:"),n(),s(10),n(),o(11,"p")(12,"strong"),s(13,"Tipo:"),n(),s(14),n()(),o(15,"mat-form-field",3)(16,"mat-label"),s(17,"Descripci\xF3n"),n(),p(18,"textarea",4),n(),o(19,"div",5)(20,"button",6),_("click",function(){return a.onCancel()}),s(21," Cancelar "),n(),o(22,"button",7)(23,"mat-icon"),s(24,"save"),n(),s(25),n()()()()()),e&2&&(l(5),m("formGroup",a.archivoForm),l(5),D(" ",a.archivo.Nombre),l(4),D(" ",a.archivo.Tipo),l(8),m("disabled",a.archivoForm.invalid||a.saving),l(3),D(" ",a.saving?"Guardando...":"Guardar Cambios"," "))},dependencies:[I,X,U,z,$,L,Kt,H,G,si,ai,ni,oi,ri,Q,Y,Z,W,K,w,E,pe,de],styles:[".archivo-form[_ngcontent-%COMP%]{margin:16px 0}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.archivo-info[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;border-radius:4px;margin-bottom:16px}.archivo-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0}.form-actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:flex-end;margin-top:16px}"]})};function Ca(i,t){if(i&1){let e=y();o(0,"div",1)(1,"button",2),_("click",function(){v(e);let r=f();return g(r.action())}),s(2),n()()}if(i&2){let e=f();l(2),D(" ",e.data.action," ")}}var xa=["label"];function ya(i,t){}var Aa=Math.pow(2,31)-1,Me=class{_overlayRef;instance;containerInstance;_afterDismissed=new ne;_afterOpened=new ne;_onAction=new ne;_durationTimeoutId;_dismissedByAction=!1;constructor(t,e){this._overlayRef=e,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,Aa))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},hi=new Ce("MatSnackBarData"),ve=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},Ma=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275dir=Ee({type:i,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return i})(),Sa=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275dir=Ee({type:i,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return i})(),Ea=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275dir=Ee({type:i,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return i})(),Oa=(()=>{class i{snackBarRef=x(Me);data=x(hi);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(a){return new(a||i)};static \u0275cmp=A({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(a,r){a&1&&(o(0,"div",0),s(1),n(),we(2,Ca,3,1,"div",1)),a&2&&(l(),D(" ",r.data.message,`
`),l(),Ie(r.hasAction?2:-1))},dependencies:[E,Ma,Sa,Ea],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return i})(),Rt="_mat-snack-bar-enter",Bt="_mat-snack-bar-exit",ka=(()=>{class i extends Jt{_ngZone=x(Oe);_elementRef=x(Se);_changeDetectorRef=x(De);_platform=x(Ht);_animationsDisabled=It();snackBarConfig=x(ve);_document=x(yt);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=x(xe);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new ne;_onExit=new ne;_onEnter=new ne;_animationState="void";_live;_label;_role;_liveElementId=x(Xt).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();let a=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),a}attachTemplatePortal(e){this._assertNotAttached();let a=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),a}attachDomPortal=e=>{this._assertNotAttached();let a=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),a};onAnimationEnd(e){e===Bt?this._completeExit():e===Rt&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?Mt(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Rt)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(Rt)},200)))}exit(){return this._destroyed?Vt(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?Mt(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Bt)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(Bt),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,a=this.snackBarConfig.panelClass;a&&(Array.isArray(a)?a.forEach(u=>e.classList.add(u)):e.classList.add(a)),this._exposeToModals();let r=this._label.nativeElement,c="mdc-snackbar__label";r.classList.toggle(c,!r.querySelector(`.${c}`))}_exposeToModals(){let e=this._liveElementId,a=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<a.length;r++){let c=a[r],u=c.getAttribute("aria-owns");this._trackedModals.add(c),u?u.indexOf(e)===-1&&c.setAttribute("aria-owns",u+" "+e):c.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let a=e.getAttribute("aria-owns");if(a){let r=a.replace(this._liveElementId,"").trim();r.length>0?e.setAttribute("aria-owns",r):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,a=e.querySelector("[aria-hidden]"),r=e.querySelector("[aria-live]");if(a&&r){let c=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&a.contains(document.activeElement)&&(c=document.activeElement),a.removeAttribute("aria-hidden"),r.appendChild(a),c?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(a){return new(a||i)};static \u0275cmp=A({type:i,selectors:[["mat-snack-bar-container"]],viewQuery:function(a,r){if(a&1&&(St(Ft,7),St(xa,7)),a&2){let c;Et(c=Ot())&&(r._portalOutlet=c.first),Et(c=Ot())&&(r._label=c.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(a,r){a&1&&_("animationend",function(u){return r.onAnimationEnd(u.animationName)})("animationcancel",function(u){return r.onAnimationEnd(u.animationName)}),a&2&&Pe("mat-snack-bar-container-enter",r._animationState==="visible")("mat-snack-bar-container-exit",r._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!r._animationsDisabled)},features:[Lt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(a,r){a&1&&(o(0,"div",1)(1,"div",2,0)(3,"div",3),b(4,ya,0,0,"ng-template",4),n(),p(5,"div"),n()()),a&2&&(l(5),ke("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[Ft],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return i})();function wa(){return new ve}var Ia=new Ce("mat-snack-bar-default-options",{providedIn:"root",factory:wa}),zo=(()=>{class i{_live=x(qt);_injector=x(xe);_breakpointObserver=x(Gt);_parentSnackBar=x(i,{optional:!0,skipSelf:!0});_defaultConfig=x(Ia);_animationsDisabled=It();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=Oa;snackBarContainerComponent=ka;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,a){return this._attach(e,a)}openFromTemplate(e,a){return this._attach(e,a)}open(e,a="",r){let c=O(O({},this._defaultConfig),r);return c.data={message:e,action:a},c.announcementMessage===e&&(c.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,c)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,a){let r=a&&a.viewContainerRef&&a.viewContainerRef.injector,c=xe.create({parent:r||this._injector,providers:[{provide:ve,useValue:a}]}),u=new Tt(this.snackBarContainerComponent,a.viewContainerRef,c),d=e.attach(u);return d.instance.snackBarConfig=a,d.instance}_attach(e,a){let r=O(O(O({},new ve),this._defaultConfig),a),c=this._createOverlay(r),u=this._attachSnackBarContainer(c,r),d=new Me(u,c);if(e instanceof zt){let h=new Wt(e,null,{$implicit:r.data,snackBarRef:d});d.instance=u.attachTemplatePortal(h)}else{let h=this._createInjector(r,d),F=new Tt(e,void 0,h),ge=u.attachComponentPortal(F);d.instance=ge.instance}return this._breakpointObserver.observe(Yt.HandsetPortrait).pipe(jt(c.detachments())).subscribe(h=>{c.overlayElement.classList.toggle(this.handsetCssClass,h.matches)}),r.announcementMessage&&u._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(d,r),this._openedSnackBarRef=d,this._openedSnackBarRef}_animateSnackBar(e,a){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),a.announcementMessage&&this._live.clear()}),a.duration&&a.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(a.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let a=new ei;a.direction=e.direction;let r=ti(this._injector),c=e.direction==="rtl",u=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!c||e.horizontalPosition==="end"&&c,d=!u&&e.horizontalPosition!=="center";return u?r.left("0"):d?r.right("0"):r.centerHorizontally(),e.verticalPosition==="top"?r.top("0"):r.bottom("0"),a.positionStrategy=r,a.disableAnimations=this._animationsDisabled,ii(this._injector,a)}_createInjector(e,a){let r=e&&e.viewContainerRef&&e.viewContainerRef.injector;return xe.create({parent:r||this._injector,providers:[{provide:Me,useValue:a},{provide:hi,useValue:e.data}]})}static \u0275fac=function(a){return new(a||i)};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();export{pt as a,ci as b,re as c,fi as d,Yn as e,Qn as f,Ct as g,_i as h,zo as i};
